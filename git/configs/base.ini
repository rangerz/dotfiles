[core]
    editor = vim

    # Custom ignore/attributes paths
    excludesfile = ~/.dotfiles/git/gitignore
    attributesfile = ~/.dotfiles/git/gitattributes

    # Treat spaces before tabs and all kinds of trailing whitespace as an error.
    # [default] trailing-space: looks for spaces at the end of a line
    # [default] space-before-tab: looks for spaces before tabs at the beginning of a line
    whitespace = space-before-tab,-indent-with-non-tab,trailing-space

    # Make `git rebase` safer on macOS.
    # More info: <http://www.git-tower.com/blog/make-git-rebase-safe-on-osx/>
    trustctime = false

    # Prevent showing files whose names contain non-ASCII symbols as unversioned.
    # http://michael-kuehnel.de/git/2014/11/21/git-mac-osx-and-german-umlaute.html
    precomposeunicode = false

    # Handle line endings when committing/checking out files.
    autocrlf = input

    # Ensure safety with line endings.
    safecrlf = true

    # Display paths with non-ASCII chars (ex: UTF-8 chinese) in readable form.
    quotepath = false

[init]
    defaultBranch = main

[commit]
    template = ~/.dotfiles/git/commit.template
    verbose = true
    cleanup = scissors

[branch]
    # Show most recently changed branches first.
    sort = -committerdate

[tag]
    sort = version:refname

[apply]
    # Detect whitespace errors when applying a patch.
    whitespace = fix

[diff]
    # 偵測重新命名與複製的檔案，與 colorMoved 搭配可更準確顯示移動行
    # Detect both renames and copies; improves moved-line/colorMoved rendering
    renames = copies

    # 調高 rename/copy 偵測的檔案數量上限 (預設 200)，大型專案建議提高
    # Increase limit for rename/copy detection (default 200, set to 1000 here)
    renameLimit = 1000

    # 啟用更緊湊的 diff 顯示，讓相鄰的修改合併成一塊，比較符合人類閱讀習慣
    # Enable more compact diffs by grouping adjacent changes, improves readability
    compactionHeuristic = true

    # 忽略空白差異來判斷移動的程式碼行，避免僅因縮排/空白不同被當成不同
    # Ignore whitespace when detecting moved lines; prevents false positives from indentation/spacing changes
    colorMovedWS = no

    # 更好的 hunk 邊界偵測演算法
    # Better hunk boundaries for readable diffs
    algorithm = histogram

    # 顯示 submodule commit 紀錄而不只是 hash
    # Show submodule commit logs instead of only commit hashes
    submodule = log

    # 在 diff 輸出中使用更具意義的檔案前綴
    # Use more descriptive prefixes in diff output (e.g., i/ for index, w/ for working tree)
    mnemonicPrefix = true

[log]
    # git log date format: 2024-12-04 20:04:29 -0600.
    date = iso

    decorate = short

[status]
    # 在 git status 中顯示子模組的摘要資訊 (commit 狀態、是否有變更)
    # Show submodule summary in git status output
    submoduleSummary = true

[help]
    # 輕度自動更正：顯示提示並詢問
    # Mild autocorrect: prompt before running a fix
    autocorrect = prompt

[url "ssh://git@github.com/"]
    # 統一將 https 改為 ssh，方便使用 SSH 金鑰
    # Rewrite https to ssh for GitHub
    insteadOf = https://github.com/
